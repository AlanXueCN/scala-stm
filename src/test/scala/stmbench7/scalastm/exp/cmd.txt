java version "1.7.0"
Java(TM) SE Runtime Environment (build 1.7.0-b147)
Java HotSpot(TM) 64-Bit Server VM (build 21.0-b17, mixed mode)
Scala code runner version 2.9.0.1 -- Copyright 2002-2011, LAMP/EPFL

for p in 0 1 2 3 4; do
  for t in 1 2 3 4 6 8 10 12 14 16 24 32 48 64; do
    for g in stm coarse medium; do
      for r in r w rw; do
        d=src/test/scala/stmbench7/scalastm/exp/pass$p/thread$t/$r
        echo $d/$g
        mkdir -p $d
        JAVA_OPTS="-Xloggc:$d/$g.gc" scala -cp lib/stmbench7-VELOX-1.2.jar:target/scala_2.9.0-1/classes:target/scala_2.9.0-1/test-classes stmbench7.Benchmark -s stmbench7.scalastm.ScalaSTMInitializer -t $t -l 60 -w $r --no-traversals -g $g > $d/$g.out 2>&1
      done
    done
  done
done
